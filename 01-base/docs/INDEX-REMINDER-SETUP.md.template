# ğŸ“Œ ç´¢å¼•æé†’è¨­ç½®æŒ‡å—

> **ç›®çš„**: è¨­ç½®è‡ªå‹•æé†’æ©Ÿåˆ¶ï¼Œç¢ºä¿ä¸å¿˜è¨˜æ›´æ–°é …ç›®ç´¢å¼•
> **é©ç”¨**: ä½¿ç”¨ Git hooks å’Œè‡ªå‹•åŒ–è…³æœ¬

---

## ğŸ”§ è¨­ç½®æ­¥é©Ÿ

### 1. Git Pre-commit Hook

å‰µå»º `.git/hooks/pre-commit` æ–‡ä»¶ï¼š

```bash
#!/bin/sh

# æª¢æŸ¥æ˜¯å¦æœ‰æ–°å¢çš„é‡è¦æ–‡ä»¶
NEW_FILES=$(git diff --cached --name-only --diff-filter=A | grep -E '\.(ts|tsx|md)$' | grep -E 'lib/|components/|app/api/|app/dashboard/')

if [ ! -z "$NEW_FILES" ]; then
  echo "âš ï¸  åµæ¸¬åˆ°æ–°å¢çš„é‡è¦æ–‡ä»¶ï¼Œè«‹è¨˜å¾—æ›´æ–° PROJECT-INDEX.md"
  echo "$NEW_FILES"
  echo ""
  read -p "æ˜¯å¦å·²æ›´æ–°ç´¢å¼•ï¼Ÿ (y/n) " -n 1 -r
  echo
  if [[ ! $REPLY =~ ^[Yy]$ ]]; then
    echo "âŒ è«‹å…ˆæ›´æ–° PROJECT-INDEX.md å†æäº¤"
    exit 1
  fi
fi
```

### 2. è‡ªå‹•æª¢æŸ¥è…³æœ¬

ä½¿ç”¨ `scripts/check-index-sync.js` é€²è¡Œè‡ªå‹•æª¢æŸ¥ã€‚

### 3. NPM Script

åœ¨ `package.json` æ·»åŠ ï¼š

```json
{
  "scripts": {
    "check:index": "node scripts/check-index-sync.js"
  }
}
```

---

## âœ… ä½¿ç”¨æ–¹å¼

- **æäº¤å‰æª¢æŸ¥**: Git hook æœƒè‡ªå‹•é‹è¡Œ
- **æ‰‹å‹•æª¢æŸ¥**: é‹è¡Œ `npm run check:index`
- **CI/CD æ•´åˆ**: åœ¨ CI æµç¨‹ä¸­é‹è¡Œæª¢æŸ¥

---

**ğŸ“ æç¤º**: è‡ªå‹•åŒ–æé†’å¯ä»¥æœ‰æ•ˆé˜²æ­¢å¿˜è¨˜æ›´æ–°ç´¢å¼•ï¼
